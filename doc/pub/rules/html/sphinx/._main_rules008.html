
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Book versions with and without solutions to exercises</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <script src="http://sagecell.sagemath.org/static/jquery.min.js"></script>
        <script src="http://sagecell.sagemath.org/static/embedded_sagecell.js"></script>

        <script>sagecell.makeSagecell({inputLocation: ".sage"});</script>

        <style type="text/css">
                .sagecell .CodeMirror-scroll {
                        overflow-y: hidden;
                        overflow-x: auto;
                }
                .sagecell .CodeMirror {
                        height: auto;
                }
        </style>

    
    <link rel="top" title="Directory and file structure" href="index.html" />
    <link rel="next" title="Special features for teaching material" href="._main_rules009.html" />
    <link rel="prev" title="Writing in private repository while publishing in public" href="._main_rules007.html" />
 
  
       <style type="text/css">
         div.admonition {
           background-color: whiteSmoke;
           border: 1px solid #bababa;
         }
       </style>
      </head>
    
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="._main_rules009.html" title="Special features for teaching material"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="._main_rules007.html" title="Writing in private repository while publishing in public"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Directory and file structure</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="book-versions-with-and-without-solutions-to-exercises">
<h1>Book versions with and without solutions to exercises<a class="headerlink" href="#book-versions-with-and-without-solutions-to-exercises" title="Permalink to this headline">¶</a></h1>
<span class="target" id="index-0"></span><p id="index-1">It is easy to turn solutions to exercises on or off by the options
<code class="docutils literal"><span class="pre">--without_solutions</span></code> (for <code class="docutils literal"><span class="pre">!bsol</span></code> environments) and <code class="docutils literal"><span class="pre">--without_answers</span></code>
(for <code class="docutils literal"><span class="pre">!bans</span></code> environments). One often wants to publish a book
without solutions to exercises, but also make versions with solutions.
One possibility is to password protect the versions with solutions.</p>
<p>It can be wise to create a very complicated filename for the files
that may be shown in a browser with the URL visible for a class.
One possibility
is to create a 40 long SHA1 string as filename and start it with a dot
to also make it invisible in most operating systems.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">hash</span><span class="o">=</span>82dee82e1274a586571086dca04d00308d3a0d86
<span class="nv">html</span><span class="o">=</span>.trash&lt;built-in <span class="k">function</span> <span class="nb">hash</span>&gt;
doconce format html book --html_output<span class="o">=</span><span class="nv">$html</span> ...
</pre></div>
</div>
<div class="section" id="password-protected-files">
<h2>Password protected files<a class="headerlink" href="#password-protected-files" title="Permalink to this headline">¶</a></h2>
<p>The file following file, called <code class="docutils literal"><span class="pre">password.html</span></code>, presents an empty page
with a button for providing a password, and if approved, the first
page of the book opens up.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="c">&lt;!-- password protected HTML page ---&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">passWord</span><span class="p">()</span> <span class="p">{</span>
<span class="kd">var</span> <span class="nx">testV</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">pass1</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="s1">&#39;Please enter your password&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">testV</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">pass1</span><span class="p">)</span>
<span class="nx">history</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">pass1</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;PASSWORD&quot;</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;You Got it Right!&#39;</span><span class="p">);</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;DESTINATION.html&#39;</span><span class="p">);</span>
<span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">testV</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">pass1</span> <span class="o">=</span>
<span class="nx">prompt</span><span class="p">(</span><span class="s1">&#39;Access denied - password incorrect!&#39;</span><span class="p">,</span> <span class="s1">&#39;Password&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">pass1</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">!=</span><span class="s2">&quot;password&quot;</span> <span class="o">&amp;</span> <span class="nx">testV</span> <span class="o">==</span><span class="mi">3</span><span class="p">)</span>
<span class="nx">history</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;center&gt;</span>
<span class="nt">&lt;form&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Enter Protected Area&quot;</span> <span class="na">onClick=</span><span class="s">&quot;passWord()&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/center&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Suppose your HTML file with solutions that you want to password protect has the
name <code class="docutils literal"><span class="pre">book-sol.html</span></code>. Then you can simply do</p>
<div class="highlight-bash"><div class="highlight"><pre>cp password.html book-sol.html
doconce replace DESTINATION <span class="s2">&quot;</span><span class="nv">$html</span><span class="s2">&quot;</span> book-sol.html
doconce replace PASSWORD <span class="s2">&quot;s!m!art|pass@word&quot;</span> book-sol.html
</pre></div>
</div>
<p>A PDF file can easily be password protected with the use of the <code class="docutils literal"><span class="pre">pdftk</span></code>
tool. If <code class="docutils literal"><span class="pre">book.pdf</span></code> is with solutions, <code class="docutils literal"><span class="pre">book-sol.pdf</span></code> will also require
a password <code class="docutils literal"><span class="pre">a!4</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre>pdftk book.pdf output book-sol.pdf owner_pw foo user_pw <span class="s2">&quot;a!4&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="separating-the-source-files-from-published-documents">
<h2>Separating the source files from published documents<a class="headerlink" href="#separating-the-source-files-from-published-documents" title="Permalink to this headline">¶</a></h2>
<p>The primary repository organization described in this document has the
DocOnce source files in <code class="docutils literal"><span class="pre">doc/src</span></code>, while compiled and published
documents appear in <code class="docutils literal"><span class="pre">doc/pub</span></code>. If the book is published without
solutions to exercises, one will often avoid readers to dive into the
DocOnce source files in the repository and find solutions. The author
has two methods for dealing with this problem.</p>
<p>The first method is simple, but not safe. The idea is to rename
<code class="docutils literal"><span class="pre">doc/src</span></code> to <code class="docutils literal"><span class="pre">doc/.src</span></code>. That is, the source tree has a name starting
with a dot (<code class="docutils literal"><span class="pre">.src</span></code>) such that the directory is invisible on Unix
systems. However, it is visible on GitHub, and any <code class="docutils literal"><span class="pre">ls</span> <span class="pre">-a</span></code> command
will list the source tree. A reader who really wants to find solutions
in the DocOnce source files will most likely locate the files...</p>
<p>Another, completely safe method is to move the <code class="docutils literal"><span class="pre">.src</span></code> or <code class="docutils literal"><span class="pre">src</span></code>
directory tree to a new, private repository when the book is to be published.
The <code class="docutils literal"><span class="pre">make*</span></code> scripts must then the updated such that the directory
where the documents are published becomes correct.</p>
<p>One can also start out with a private repository for the source files and
a public repository for the published files. This author, however, prefers
to use one repository when developing major parts of a book and then
migrate the source tree to a private repository when solutions are to be
protected from the public.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <center>
            <p class="logo"><a href="http://www.mn.uio.no/english/" title="Go to University of Oslo">
              <img class="logo" src="https://raw.githubusercontent.com/CINPLA/logo/master/brain/cinpla_uio_logo.png" alt="Logo"/>
            </a></p>
            </center>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Book versions with and without solutions to exercises</a><ul>
<li><a class="reference internal" href="#password-protected-files">Password protected files</a></li>
<li><a class="reference internal" href="#separating-the-source-files-from-published-documents">Separating the source files from published documents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="._main_rules007.html"
                        title="previous chapter">Writing in private repository while publishing in public</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="._main_rules009.html"
                        title="next chapter">Special features for teaching material</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/._main_rules008.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="._main_rules009.html" title="Special features for teaching material"
             >next</a> |</li>
        <li class="right" >
          <a href="._main_rules007.html" title="Writing in private repository while publishing in public"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Directory and file structure</a> &raquo;</li> 
      </ul>
    </div>
<div class="wrapper">
  <div class="footer">
  <a href="http://www.mn.uio.no/english/"><img src="_static/uio_banner.png" width="20%"><a>
  </div>
</div>

  </body>
</html>